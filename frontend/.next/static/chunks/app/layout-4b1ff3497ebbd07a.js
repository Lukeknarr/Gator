(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{9058:function(e,t,r){Promise.resolve().then(r.t.bind(r,2853,23)),Promise.resolve().then(r.bind(r,7618)),Promise.resolve().then(r.t.bind(r,3925,23)),Promise.resolve().then(r.bind(r,5925))},7618:function(e,t,r){"use strict";r.r(t),r.d(t,{Providers:function(){return l}});var o=r(7437),n=r(9077),a=r(9921),i=r(1344);let s=new n.QueryClient({defaultOptions:{queries:{refetchOnWindowFocus:!1,retry:1}}});function l(e){let{children:t}=e;return(0,o.jsxs)(n.QueryClientProvider,{client:s,children:[(0,o.jsx)(i.H,{children:t}),(0,o.jsx)(a.ReactQueryDevtools,{initialIsOpen:!1})]})}},1344:function(e,t,r){"use strict";r.d(t,{H:function(){return s},a:function(){return l}});var o=r(7437),n=r(2265),a=r(9843);let i=(0,n.createContext)(void 0);function s(e){let{children:t}=e,[r,s]=(0,n.useState)(null),[l,c]=(0,n.useState)(!0);(0,n.useEffect)(()=>{let e=localStorage.getItem("gator_token");e?(a.h.defaults.headers.common.Authorization="Bearer ".concat(e),u()):c(!1)},[]);let u=async()=>{try{let e=await a.h.get("/user/profile");s(e.data)}catch(e){console.error("Failed to fetch user:",e),localStorage.removeItem("gator_token"),delete a.h.defaults.headers.common.Authorization}finally{c(!1)}},h=async(e,t)=>{try{let r=await a.h.post("/login",{username:e,password:t}),{access_token:o}=r.data;localStorage.setItem("gator_token",o),a.h.defaults.headers.common.Authorization="Bearer ".concat(o),await u()}catch(e){throw console.error("Login failed:",e),e}},d=async(e,t,r)=>{try{await a.h.post("/register",{email:e,username:t,password:r}),await h(t,r)}catch(e){throw console.error("Registration failed:",e),e}};return(0,o.jsx)(i.Provider,{value:{user:r,isAuthenticated:!!r,isLoading:l,login:h,logout:()=>{localStorage.removeItem("gator_token"),delete a.h.defaults.headers.common.Authorization,s(null)},register:d},children:t})}function l(){let e=(0,n.useContext)(i);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},9843:function(e,t,r){"use strict";r.d(t,{h:function(){return n}});var o=r(2173);let n=o.Z.create({baseURL:"https://gator-api.up.railway.app",headers:{"Content-Type":"application/json"}});n.interceptors.request.use(e=>{let t=localStorage.getItem("gator_token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),n.interceptors.response.use(e=>e,e=>{var t;return(null===(t=e.response)||void 0===t?void 0:t.status)===401&&(localStorage.removeItem("gator_token"),window.location.href="/login"),Promise.reject(e)})},2853:function(){},3925:function(e){e.exports={style:{fontFamily:"'__Inter_e8ce0c', '__Inter_Fallback_e8ce0c'",fontStyle:"normal"},className:"__className_e8ce0c"}},9921:function(e){e.exports={ReactQueryDevtools:function(){return null},ReactQueryDevtoolsPanel:function(){return null}}}},function(e){e.O(0,[509,971,472,744],function(){return e(e.s=9058)}),_N_E=e.O()}]);